> Java by 유종원
> 수정 및 배포, 상업적 사용을 금지합니다.

<!-- @import "[TOC]" {cmd="toc" depthFrom=1 depthTo=6 orderedList=false} -->

<!-- code_chunk_output -->

- [퀵 정렬 (Quick Sort)](#퀵-정렬-quick-sort)
    - [개요](#개요)
    - [마지막 숫자를 기준으로 정렬하는 과정](#마지막-숫자를-기준으로-정렬하는-과정)
    - [구현하기](#구현하기)

<!-- /code_chunk_output -->

# 퀵 정렬 (Quick Sort)
다음과 같이 정렬되지 않은 배열이 있다.
```py
[4, 2, 0, 5, 6, 1, 3]
```
다음과 같이 숫자들을 오름차순으로 정렬하는 것이 목표다.
```py
[0, 1, 2, 3, 4, 5, 6]
```

### 개요
배열의 범위를 반으로 나누어가면서 정렬한다.
1. 마지막 숫자를 기준으로 작은 수는 왼쪽에 큰 수는 오른쪽에 배치한다.
1. 기준 수를 정렬한다.
1. 기준 수를 중심으로 왼쪽과 오른쪽에 대해 반복한다.

* 단계별
```py
[4, 2, 0, 5, 6, 1, 3] # 정렬 전 배열 상태
[2, 0, 1, 5, 6, 4, 3] # 기준 수로 숫자 정렬
[2, 0, 1] 3 [6, 4, 5] # 기준 수 정렬
[0, 2, 1]   [4, 6, 5] # 기준 수로 숫자 정렬
[0] 1 [2]   [4] 5 [6] # 기준 수 정렬
[0]   [2]   [4]   [6] # 기준 수로 숫자 정렬
 0     2     4     6  # 기준 수 정렬
[0, 1, 2, 3, 4, 5, 6] # 정렬 후 배열 상태
```

* 시간순
```py
[4, 2, 0, 5, 6, 1, 3] # 정렬 전 배열 상태
[2, 0, 1, 5, 6, 4, 3] # 기준 수로 숫자 정렬 (전체)
[2, 0, 1] 3 [6, 4, 5] # 기준 수 정렬
[0, 2, 1]             # 기준 수로 숫자 정렬 (왼쪽)
[0] 1 [2]             # 기준 수 정렬
[0]                   # 기준 수로 숫자 정렬 (왼쪽의 왼쪽)
 0                    # 기준 수 정렬
      [2]             # 기준 수로 숫자 정렬 (왼쪽의 오른쪽)
       2              # 기준 수 정렬
            [4, 6, 5] # 기준 수로 숫자 정렬 (오른쪽)
            [4] 5 [6] # 기준 수 정렬
            [4]       # 기준 수로 숫자 정렬 (오른쪽의 왼쪽)
             4        # 기준 수 정렬
                  [6] # 기준 수로 숫자 정렬 (오른쪽의 오른쪽)
                   6  # 기준 수 정렬
[0, 1, 2, 3, 4, 5, 6] # 정렬 후 배열 상태
```

### 마지막 숫자를 기준으로 정렬하는 과정
* `i`는 현재 수, `j`는 기준 수 보다 큰 수를 가리킨다.
* `i`와 `j` 모두 해당 범위의 가장 낮은 인덱스에서 시작한다.
* `i`가 가리키는 수가 기준 수 보다 작으면 `j`가 가리키는 수와 교환하고, `j`를 1만큼 증가시킨다.
* `i`가 가리키는 수가 기준 수가 되면 `j`가 가리키는 수와 교환해 기준 수를 정렬한다.

```py
[4, 2, 0, 5, 6, 1, 3] # i=0, j=0, 기준 수 3
[2, 4, 0, 5, 6, 1, 3] # i=1, j=0, 교환
[2, 0, 4, 5, 6, 1, 3] # i=2, j=1, 교환
[2, 0, 4, 5, 6, 1, 3] # i=3, j=2
[2, 0, 4, 5, 6, 1, 3] # i=4, j=2
[2, 0, 4, 5, 6, 1, 3] # i=5, j=2, 교환
[2, 0, 1, 5, 6, 4, 3] # i=6, j=3, 기준 수 정렬
[2, 0, 1] 3 [6, 4, 5]
[2, 0, 1]             # i=0, j=0, 기준 수 1
[2, 0, 1]             # i=1, j=0, 교환
[0, 2, 1]             # i=2, j=1, 기준 수 정렬
[0] 1 [2]
[0]                   # i=0, j=0, 기준 수 0, 기준 수 정렬
 0
      [2]             # i=2, j=2, 기준 수 2, 기준 수 정렬
       2
            [6, 4, 5] # i=4, j=4, 기준 수 5
            [6, 4, 5] # i=5, j=4, 교환
            [4, 6, 5] # i=6, j=5, 기준 수 정렬
            [4, 5, 6]
            [4]       # i=4, j=4, 기준 수 4, 기준 수 정렬
             4
                  [6] # i=6, j=6, 기준 수 4, 기준 수 정렬
                   6
```

### 구현하기
```java
import java.util.Arrays;
import java.util.Collections;

class QuickSort {
  static void sort(Integer[] a, int low, int high) {
    if (low >= high) return;
    // 기준 수를 정렬하고, 정렬된 기준 수의 인덱스를 구한다.
    // 배열을 재귀적으로 반으로 나누어가며 정렬한다.
  }

  public static void main(String[] args) {
    var n = 7;
    var a = new Integer[n];
    for (var i = 0; i < n; i = i + 1) {
      a[i] = i;
    }
    Collections.shuffle(Arrays.asList(a));

    for (var i: a) {
      System.out.printf("%3d", i);
    }
    System.out.println();

    sort(a, 0, n - 1);

    for (var i: a) {
      System.out.printf("%3d", i);
    }
    System.out.println();
  }
}
```
